{
    "sourceFile": "app/Http/Controllers/Main/PeminjamanKendaraanController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 63,
            "patches": [
                {
                    "date": 1704814303137,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1704971054919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,8 +58,9 @@\n                 'tanggal_pinjam' => 'required',\n                 'jam_pinjam' => 'required',\n                 'tanggal_kembali' => 'required',\n                 'jam_kembali' => 'required',\n+                'keterangan' => 'required',\n                 'status' => 'required',\n \n             ],\n             [\n@@ -69,8 +70,9 @@\n                 'tanggal_pinjam.required' => 'tanggal_pinjam tidak boleh kosong',\n                 'jam_pinjam.required' => 'jam_pinjam tidak boleh kosong',\n                 'tanggal_kembali.required' => 'tanggal_kembali tidak boleh kosong',\n                 'jam_kembali.required' => 'jam_kembali tidak boleh kosong',\n+                'keterangan.required' => 'keterangan tidak boleh kosong',\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n         );\n \n@@ -81,8 +83,9 @@\n             'tanggal_pinjam' => $request->tanggal_pinjam,\n             'jam_pinjam' => $request->jam_pinjam,\n             'tanggal_kembali' => $request->tanggal_kembali,\n             'jam_kembali' => $request->jam_kembali,\n+            'keterangan' => $request->keterangan,\n             'status' => $request->status,\n         ]);\n \n         Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n@@ -116,8 +119,9 @@\n             'tanggal_pinjam' => $row->tanggal_pinjam,\n             'jam_pinjam' => $row->jam_pinjam,\n             'tanggal_kembali' => $row->tanggal_kembali,\n             'jam_kembali' => $row->jam_kembali,\n+            'keterangan' => $row->keterangan,\n             'status' => $row->status,\n         ]);\n     }\n \n@@ -139,8 +143,9 @@\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n+            $row->keterangan = $request->keterangan;\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'pending') {\n"
                },
                {
                    "date": 1705024939401,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,16 +16,16 @@\n     public function index()\n     {\n         if ($user = auth()->user()->jab_id == 4) {\n             $user = auth()->user()->id;\n-            $data['title'] = 'Data pengajuan peminjaman kendaraan';\n+            $data['title'] = 'Data pengajuan kendaraan';\n             $user = PeminjamanKendaraan::with('users', 'kendaraan')\n                 ->where('user_id', $user)\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.peminjaman_kendaraan.index', $data);\n         } else {\n-            $data['title'] = 'Data pengajuan peminjaman kendaraan';\n+            $data['title'] = 'Data pengajuan kendaraan';\n             $user = PeminjamanKendaraan::with('users', 'kendaraan')\n                 ->get();\n             $data['result'] = $user->sortDesc();\n             return view('main.peminjaman_kendaraan.index', $data);\n@@ -39,9 +39,9 @@\n     {\n         $data['user'] = User::all();\n         $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n         $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n-        $data['title'] = \"Tambah Data Peminjaman Kendaraan\";\n+        $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n         return view(\"main.peminjaman_kendaraan.create\", $data);\n     }\n \n     /**\n@@ -63,9 +63,9 @@\n                 'status' => 'required',\n \n             ],\n             [\n-                'user_id.required' => 'user_id produk tidak boleh kosong',\n+                'user_id.required' => 'user_id tidak boleh kosong',\n                 'kendaraan_id.required' => 'kendaraan_id tidak boleh kosong',\n                 'kegiatan.required' => 'kegiatan tidak boleh kosong',\n                 'tanggal_pinjam.required' => 'tanggal_pinjam tidak boleh kosong',\n                 'jam_pinjam.required' => 'jam_pinjam tidak boleh kosong',\n"
                },
                {
                    "date": 1705024964223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n         $row = PeminjamanKendaraan::findOrFail($id);\n         $user = User::all();\n         $kendaraan = Kendaraan::all();\n         return view('main.peminjaman_kendaraan.edit', [\n-            'title' => 'Edit Data Pengajuan Peminjaman Kendaraan',\n+            'title' => 'Edit Data Pengajuan Kendaraan',\n             'user' => $user,\n             'id' => $row->id,\n             'nama' => $row->nama,\n             'kendaraan' => $kendaraan,\n"
                },
                {
                    "date": 1705156793229,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,8 +150,11 @@\n             $row->save();\n             if ($row->status != 'pending') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n+            if ($row->status != 'approved') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705201111407,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,9 +150,9 @@\n             $row->save();\n             if ($row->status != 'pending') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n-            if ($row->status != 'approved') {\n+            if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705201873224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -150,11 +150,8 @@\n             $row->save();\n             if ($row->status != 'pending') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705201981207,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,9 +147,9 @@\n             $row->keterangan = $request->keterangan;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'pending') {\n+            if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705215890661,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->user_id = $request->user_id;\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n"
                },
                {
                    "date": 1705221500531,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,8 +149,11 @@\n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n+            if ($row->keterangan != $request->keterangan) {\n+                Kendaraan::where('id', $request->keterangan)->update(['status' => 1]);\n+            }\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705221631081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,8 +136,11 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            if ($row->keterangan != $request->keterangan) {\n+                Kendaraan::where('id', $request->keterangan)->update(['status' => 1]);\n+            }\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n@@ -149,11 +152,9 @@\n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n-            if ($row->keterangan != $request->keterangan) {\n-                Kendaraan::where('id', $request->keterangan)->update(['status' => 1]);\n-            }\n+\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705221809006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,10 +136,10 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            if ($row->keterangan != $request->keterangan) {\n-                Kendaraan::where('id', $request->keterangan)->update(['status' => 1]);\n+            if ($row->keterangan != $request->kendaraan_id) {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n"
                },
                {
                    "date": 1705221883851,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,11 +136,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            if ($row->keterangan != $request->kendaraan_id) {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n"
                },
                {
                    "date": 1705222388538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -149,9 +149,14 @@\n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n+            if ($row->keterangan != '{{ $keterangan }}') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n \n+\n+\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705222611123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,8 +136,11 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            if ($row->keterangan != '{{ $keterangan }}') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n@@ -149,14 +152,9 @@\n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n-            if ($row->keterangan != '{{ $keterangan }}') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n \n-\n-\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705222673707,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,11 +136,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            if ($row->keterangan != '{{ $keterangan }}') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n"
                },
                {
                    "date": 1705222875682,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,9 +58,8 @@\n                 'tanggal_pinjam' => 'required',\n                 'jam_pinjam' => 'required',\n                 'tanggal_kembali' => 'required',\n                 'jam_kembali' => 'required',\n-                'keterangan' => 'required',\n                 'status' => 'required',\n \n             ],\n             [\n@@ -70,9 +69,8 @@\n                 'tanggal_pinjam.required' => 'tanggal_pinjam tidak boleh kosong',\n                 'jam_pinjam.required' => 'jam_pinjam tidak boleh kosong',\n                 'tanggal_kembali.required' => 'tanggal_kembali tidak boleh kosong',\n                 'jam_kembali.required' => 'jam_kembali tidak boleh kosong',\n-                'keterangan.required' => 'keterangan tidak boleh kosong',\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n         );\n \n@@ -83,9 +81,8 @@\n             'tanggal_pinjam' => $request->tanggal_pinjam,\n             'jam_pinjam' => $request->jam_pinjam,\n             'tanggal_kembali' => $request->tanggal_kembali,\n             'jam_kembali' => $request->jam_kembali,\n-            'keterangan' => $request->keterangan,\n             'status' => $request->status,\n         ]);\n \n         Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n@@ -119,9 +116,8 @@\n             'tanggal_pinjam' => $row->tanggal_pinjam,\n             'jam_pinjam' => $row->jam_pinjam,\n             'tanggal_kembali' => $row->tanggal_kembali,\n             'jam_kembali' => $row->jam_kembali,\n-            'keterangan' => $row->keterangan,\n             'status' => $row->status,\n         ]);\n     }\n \n@@ -142,9 +138,8 @@\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n-            $row->keterangan = $request->keterangan;\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'accepted') {\n"
                },
                {
                    "date": 1705224793044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,9 +132,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705225007224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,8 +132,9 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705225125005,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,9 +132,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705225255065,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,19 +132,18 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            if ($row->status != 'accepted') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n-            $row->save();\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n"
                },
                {
                    "date": 1705225303620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,11 @@\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n+            $row->save();\n \n+\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705225404558,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,9 @@\n         if ($row) {\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n-            }\n+\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n             $row->kegiatan = $request->kegiatan;\n"
                },
                {
                    "date": 1705225433220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,9 @@\n         if ($row) {\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n-\n+            }\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n             $row->kegiatan = $request->kegiatan;\n"
                },
                {
                    "date": 1705225531247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,21 +132,21 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n+            if ($row->status != 'accepted') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n \n-\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705226471186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,9 +132,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705226750213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,8 +138,11 @@\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n+            if ($row->status != 'accepted') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n \n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n"
                },
                {
                    "date": 1705226894798,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,8 +128,11 @@\n     {\n \n         $row = PeminjamanKendaraan::find($id);\n         if ($row) {\n+            if ($row->status != 'accepted') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n@@ -138,11 +141,8 @@\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n \n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n"
                },
                {
                    "date": 1705227016935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -128,15 +128,13 @@\n     {\n \n         $row = PeminjamanKendaraan::find($id);\n         if ($row) {\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705228907511,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,10 +109,8 @@\n         return view('main.peminjaman_kendaraan.edit', [\n             'title' => 'Edit Data Pengajuan Kendaraan',\n             'user' => $user,\n             'id' => $row->id,\n-            'nama' => $row->nama,\n-            'kendaraan' => $kendaraan,\n             'kegiatan' => $row->kegiatan,\n             'tanggal_pinjam' => $row->tanggal_pinjam,\n             'jam_pinjam' => $row->jam_pinjam,\n             'tanggal_kembali' => $row->tanggal_kembali,\n"
                },
                {
                    "date": 1705229048885,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,8 +109,9 @@\n         return view('main.peminjaman_kendaraan.edit', [\n             'title' => 'Edit Data Pengajuan Kendaraan',\n             'user' => $user,\n             'id' => $row->id,\n+            'kendaraan' => $kendaraan,\n             'kegiatan' => $row->kegiatan,\n             'tanggal_pinjam' => $row->tanggal_pinjam,\n             'jam_pinjam' => $row->jam_pinjam,\n             'tanggal_kembali' => $row->tanggal_kembali,\n"
                },
                {
                    "date": 1705230129602,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n@@ -141,9 +140,9 @@\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+                Kendaraan::where('id', $request->status)->update(['status' => 1]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705230323206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,8 +131,9 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n@@ -140,9 +141,9 @@\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->status)->update(['status' => 1]);\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705230455666,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n@@ -141,9 +140,9 @@\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+                Kendaraan::where('id', $request->status)->update(['status' => 1]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705230730318,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,8 +131,12 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->save();\n+            if ($row->status != 'accepted') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n@@ -140,9 +144,9 @@\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->status)->update(['status' => 1]);\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705230777154,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,12 +131,9 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->save();\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705231420566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,9 +140,9 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'accepted') {\n+            if ($row->status != 'accepted' . 'pending') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n"
                },
                {
                    "date": 1705231687185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,10 +140,10 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'accepted' . 'pending') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            if ($row->status == 'accepted' . 'pending') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705231771963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,10 +140,10 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status == 'accepted' . 'pending') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n+            if ($row->status != 'accepted') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705231789553,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -143,8 +143,11 @@\n             $row->save();\n             if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n+            if ($row->status != 'pending') {\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+            }\n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n"
                },
                {
                    "date": 1705231908285,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,15 +140,13 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'accepted') {\n+            if ($row->status != 'accepted, pending') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n-            if ($row->status != 'pending') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n \n+\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n"
                },
                {
                    "date": 1705232132380,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,18 +131,17 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'accepted, pending') {\n+            if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n             }\n \n \n"
                },
                {
                    "date": 1705232187953,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,9 +127,9 @@\n     {\n \n         $row = PeminjamanKendaraan::find($id);\n         if ($row) {\n-            if ($row->kendaraan_id != $request->kendaraan_id) {\n+            if ($row->status != 'accepted') {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n             $row->kegiatan = $request->kegiatan;\n@@ -139,11 +139,8 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'accepted') {\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-            }\n \n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705232358793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -127,20 +127,25 @@\n     {\n \n         $row = PeminjamanKendaraan::find($id);\n         if ($row) {\n-            if ($row->status != 'accepted') {\n+            if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n+            if ($row->status != 'accepted')\n+                if ($row->status != 'pending') {\n+                    Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+                }\n \n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n"
                },
                {
                    "date": 1705232805703,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,9 +131,8 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n-            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705232861054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -131,8 +131,9 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n             $row->tanggal_kembali = $request->tanggal_kembali;\n"
                },
                {
                    "date": 1705233397822,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,10 +140,10 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'accepted')\n-                if ($row->status != 'pending') {\n+            if ($row->status != 'diterima')\n+                if ($row->status != 'proses') {\n                     Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n                 }\n \n \n"
                },
                {
                    "date": 1705233468937,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,9 +141,9 @@\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'diterima')\n-                if ($row->status != 'proses') {\n+                if ($row->status != 'diproses') {\n                     Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n                 }\n \n \n"
                },
                {
                    "date": 1705496972807,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,9 +141,9 @@\n             $row->status = $request->status;\n \n             $row->save();\n             if ($row->status != 'diterima')\n-                if ($row->status != 'diproses') {\n+                if ($row->status != 'pending') {\n                     Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n                 }\n \n \n"
                },
                {
                    "date": 1705596425500,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,8 +109,9 @@\n         return view('main.peminjaman_kendaraan.edit', [\n             'title' => 'Edit Data Pengajuan Kendaraan',\n             'user' => $user,\n             'id' => $row->id,\n+            'ruang_id' => $row->ruang_id,\n             'kendaraan' => $kendaraan,\n             'kegiatan' => $row->kegiatan,\n             'tanggal_pinjam' => $row->tanggal_pinjam,\n             'jam_pinjam' => $row->jam_pinjam,\n"
                },
                {
                    "date": 1705596620299,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n         return view('main.peminjaman_kendaraan.edit', [\n             'title' => 'Edit Data Pengajuan Kendaraan',\n             'user' => $user,\n             'id' => $row->id,\n-            'ruang_id' => $row->ruang_id,\n+            'kendaraan_id' => $row->kendaraan_id,\n             'kendaraan' => $kendaraan,\n             'kegiatan' => $row->kegiatan,\n             'tanggal_pinjam' => $row->tanggal_pinjam,\n             'jam_pinjam' => $row->jam_pinjam,\n"
                },
                {
                    "date": 1705731664107,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,8 +132,9 @@\n             if ($row->kendaraan_id != $request->kendaraan_id) {\n                 Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                 Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n             }\n+            $row->user_id = $request->user_id;\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n             $row->jam_pinjam = $request->jam_pinjam;\n"
                },
                {
                    "date": 1705731918493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -107,8 +107,9 @@\n         $user = User::all();\n         $kendaraan = Kendaraan::all();\n         return view('main.peminjaman_kendaraan.edit', [\n             'title' => 'Edit Data Pengajuan Kendaraan',\n+            'user_id' => $row->user_id,\n             'user' => $user,\n             'id' => $row->id,\n             'kendaraan_id' => $row->kendaraan_id,\n             'kendaraan' => $kendaraan,\n"
                },
                {
                    "date": 1705928566132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,23 +14,12 @@\n      * Display a listing of the resource.\n      */\n     public function index()\n     {\n-        if ($user = auth()->user()->jab_id == 4) {\n-            $user = auth()->user()->id;\n-            $data['title'] = 'Data pengajuan kendaraan';\n-            $user = PeminjamanKendaraan::with('users', 'kendaraan')\n-                ->where('user_id', $user)\n-                ->get();\n-            $data['result'] = $user->sortDesc();\n-            return view('main.peminjaman_kendaraan.index', $data);\n-        } else {\n-            $data['title'] = 'Data pengajuan kendaraan';\n-            $user = PeminjamanKendaraan::with('users', 'kendaraan')\n-                ->get();\n-            $data['result'] = $user->sortDesc();\n-            return view('main.peminjaman_kendaraan.index', $data);\n-        }\n+        $data['title'] = 'Data pengajuan kendaraan';\n+        $user = PeminjamanKendaraan::with('users', 'kendaraan')->get();\n+        $data['result'] = $user->sortDesc();\n+        return view('main.peminjaman_kendaraan.index', $data);\n     }\n \n     /**\n      * Show the form for creating a new resource.\n"
                },
                {
                    "date": 1708906556044,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,8 @@\n             'jam_kembali' => $request->jam_kembali,\n             'status' => $request->status,\n         ]);\n \n-        Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n \n         return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n     }\n \n@@ -118,12 +117,8 @@\n     {\n \n         $row = PeminjamanKendaraan::find($id);\n         if ($row) {\n-            if ($row->kendaraan_id != $request->kendaraan_id) {\n-                Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n-            }\n             $row->user_id = $request->user_id;\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n@@ -132,14 +127,9 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'diterima')\n-                if ($row->status != 'pending') {\n-                    Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-                }\n \n-\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n@@ -148,9 +138,8 @@\n      */\n     public function destroy(string $id)\n     {\n         $data = PeminjamanKendaraan::findOrFail($id);\n-        Kendaraan::where('id', $data->kendaraan_id)->update(['status' => 1]);\n         $data->delete();\n         return back()->with('hapus', 'Data sudah di Hapus!');\n     }\n }\n"
                },
                {
                    "date": 1708906857590,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,8 @@\n      */\n     public function create()\n     {\n         $data['user'] = User::all();\n-        $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n         $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n         $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n         return view(\"main.peminjaman_kendaraan.create\", $data);\n     }\n"
                },
                {
                    "date": 1708907464709,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n      */\n     public function create()\n     {\n         $data['user'] = User::all();\n+        $data['kendaraan'] = Kendaraan::all();\n         $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n         $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n         return view(\"main.peminjaman_kendaraan.create\", $data);\n     }\n"
                },
                {
                    "date": 1713853743052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,150 @@\n+<?php\n+\n+namespace App\\Http\\Controllers\\Main;\n+\n+use App\\Http\\Controllers\\Controller;\n+use App\\Models\\Kendaraan;\n+use App\\Models\\PeminjamanKendaraan;\n+use App\\Models\\User;\n+use Illuminate\\Http\\Request;\n+\n+class PeminjamanKendaraanController extends Controller\n+{\n+    /**\n+     * Display a listing of the resource.\n+     */\n+    public function index()\n+    {\n+        $data['title'] = 'Data pengajuan kendaraan';\n+        $user = PeminjamanKendaraan::with('users', 'kendaraan')->get();\n+        $data['result'] = $user->sortDesc();\n+        return view('main.peminjaman_kendaraan.index', $data);\n+    }\n+\n+    /**\n+     * Show the form for creating a new resource.\n+     */\n+    public function create()\n+    {\n+        $data['user'] = User::all();\n+        $data['kendaraan'] = Kendaraan::all();\n+        $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n+        $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n+        return view(\"main.peminjaman_kendaraan.create\", $data);\n+    }\n+\n+    /**\n+     * Store a newly created resource in storage.\n+     */\n+    public function store(Request $request)\n+    {\n+        $validasi = $this->validate(\n+            $request,\n+            [\n+                'user_id' => 'required',\n+                'kendaraan_id' => 'required',\n+                'kegiatan' => 'required',\n+                'tanggal_pinjam' => 'required',\n+                'jam_pinjam' => 'required',\n+                'tanggal_kembali' => 'required',\n+                'jam_kembali' => 'required',\n+                'status' => 'required',\n+\n+            ],\n+            [\n+                'user_id.required' => 'user_id tidak boleh kosong',\n+                'kendaraan_id.required' => 'kendaraan_id tidak boleh kosong',\n+                'kegiatan.required' => 'kegiatan tidak boleh kosong',\n+                'tanggal_pinjam.required' => 'tanggal_pinjam tidak boleh kosong',\n+                'jam_pinjam.required' => 'jam_pinjam tidak boleh kosong',\n+                'tanggal_kembali.required' => 'tanggal_kembali tidak boleh kosong',\n+                'jam_kembali.required' => 'jam_kembali tidak boleh kosong',\n+                'status.required' => 'status tidak boleh kosong',\n+            ]\n+        );\n+\n+        PeminjamanKendaraan::create([\n+            'user_id' => $request->user_id,\n+            'kendaraan_id' => $request->kendaraan_id,\n+            'kegiatan' => $request->kegiatan,\n+            'tanggal_pinjam' => $request->tanggal_pinjam,\n+            'jam_pinjam' => $request->jam_pinjam,\n+            'tanggal_kembali' => $request->tanggal_kembali,\n+            'jam_kembali' => $request->jam_kembali,\n+            'status' => $request->status,\n+        ]);\n+\n+        Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n+\n+        return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n+    }\n+\n+    /**\n+     * Display the specified resource.\n+     */\n+    public function show(string $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     */\n+    public function edit(string $id)\n+    {\n+        $row = PeminjamanKendaraan::findOrFail($id);\n+        $user = User::all();\n+        $kendaraan = Kendaraan::all();\n+        return view('main.peminjaman_kendaraan.edit', [\n+            'title' => 'Edit Data Pengajuan Kendaraan',\n+            'user_id' => $row->user_id,\n+            'user' => $user,\n+            'id' => $row->id,\n+            'kendaraan_id' => $row->kendaraan_id,\n+            'kendaraan' => $kendaraan,\n+            'kegiatan' => $row->kegiatan,\n+            'tanggal_pinjam' => $row->tanggal_pinjam,\n+            'jam_pinjam' => $row->jam_pinjam,\n+            'tanggal_kembali' => $row->tanggal_kembali,\n+            'jam_kembali' => $row->jam_kembali,\n+            'status' => $row->status,\n+        ]);\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     */\n+    public function update(Request $request, string $id)\n+    {\n+\n+        $row = PeminjamanKendaraan::find($id);\n+        if ($row) {\n+            if ($row->kendaraan_id != $request->kendaraan_id) {\n+                Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n+            }\n+            $row->user_id = $request->user_id;\n+            $row->kendaraan_id = $request->kendaraan_id;\n+            $row->kegiatan = $request->kegiatan;\n+            $row->tanggal_pinjam = $request->tanggal_pinjam;\n+            $row->jam_pinjam = $request->jam_pinjam;\n+            $row->tanggal_kembali = $request->tanggal_kembali;\n+            $row->jam_kembali = $request->jam_kembali;\n+            $row->status = $request->status;\n+\n+            $row->save();\n+\n+            return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n+        }\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     */\n+    public function destroy(string $id)\n+    {\n+        $data = PeminjamanKendaraan::findOrFail($id);\n+        $data->delete();\n+        return back()->with('hapus', 'Data sudah di Hapus!');\n+    }\n+}\n"
                },
                {
                    "date": 1713853751796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,154 +132,14 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n+            if ($row->status != 'diterima')\n+                if ($row->status != 'pending') {\n+                    Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+                }\n \n-            return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n-        }\n-    }\n \n-    /**\n-     * Remove the specified resource from storage.\n-     */\n-    public function destroy(string $id)\n-    {\n-        $data = PeminjamanKendaraan::findOrFail($id);\n-        $data->delete();\n-        return back()->with('hapus', 'Data sudah di Hapus!');\n-    }\n-}\n-<?php\n-\n-namespace App\\Http\\Controllers\\Main;\n-\n-use App\\Http\\Controllers\\Controller;\n-use App\\Models\\Kendaraan;\n-use App\\Models\\PeminjamanKendaraan;\n-use App\\Models\\User;\n-use Illuminate\\Http\\Request;\n-\n-class PeminjamanKendaraanController extends Controller\n-{\n-    /**\n-     * Display a listing of the resource.\n-     */\n-    public function index()\n-    {\n-        $data['title'] = 'Data pengajuan kendaraan';\n-        $user = PeminjamanKendaraan::with('users', 'kendaraan')->get();\n-        $data['result'] = $user->sortDesc();\n-        return view('main.peminjaman_kendaraan.index', $data);\n-    }\n-\n-    /**\n-     * Show the form for creating a new resource.\n-     */\n-    public function create()\n-    {\n-        $data['user'] = User::all();\n-        $data['kendaraan'] = Kendaraan::all();\n-        $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n-        $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n-        return view(\"main.peminjaman_kendaraan.create\", $data);\n-    }\n-\n-    /**\n-     * Store a newly created resource in storage.\n-     */\n-    public function store(Request $request)\n-    {\n-        $validasi = $this->validate(\n-            $request,\n-            [\n-                'user_id' => 'required',\n-                'kendaraan_id' => 'required',\n-                'kegiatan' => 'required',\n-                'tanggal_pinjam' => 'required',\n-                'jam_pinjam' => 'required',\n-                'tanggal_kembali' => 'required',\n-                'jam_kembali' => 'required',\n-                'status' => 'required',\n-\n-            ],\n-            [\n-                'user_id.required' => 'user_id tidak boleh kosong',\n-                'kendaraan_id.required' => 'kendaraan_id tidak boleh kosong',\n-                'kegiatan.required' => 'kegiatan tidak boleh kosong',\n-                'tanggal_pinjam.required' => 'tanggal_pinjam tidak boleh kosong',\n-                'jam_pinjam.required' => 'jam_pinjam tidak boleh kosong',\n-                'tanggal_kembali.required' => 'tanggal_kembali tidak boleh kosong',\n-                'jam_kembali.required' => 'jam_kembali tidak boleh kosong',\n-                'status.required' => 'status tidak boleh kosong',\n-            ]\n-        );\n-\n-        PeminjamanKendaraan::create([\n-            'user_id' => $request->user_id,\n-            'kendaraan_id' => $request->kendaraan_id,\n-            'kegiatan' => $request->kegiatan,\n-            'tanggal_pinjam' => $request->tanggal_pinjam,\n-            'jam_pinjam' => $request->jam_pinjam,\n-            'tanggal_kembali' => $request->tanggal_kembali,\n-            'jam_kembali' => $request->jam_kembali,\n-            'status' => $request->status,\n-        ]);\n-\n-\n-        return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n-    }\n-\n-    /**\n-     * Display the specified resource.\n-     */\n-    public function show(string $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     */\n-    public function edit(string $id)\n-    {\n-        $row = PeminjamanKendaraan::findOrFail($id);\n-        $user = User::all();\n-        $kendaraan = Kendaraan::all();\n-        return view('main.peminjaman_kendaraan.edit', [\n-            'title' => 'Edit Data Pengajuan Kendaraan',\n-            'user_id' => $row->user_id,\n-            'user' => $user,\n-            'id' => $row->id,\n-            'kendaraan_id' => $row->kendaraan_id,\n-            'kendaraan' => $kendaraan,\n-            'kegiatan' => $row->kegiatan,\n-            'tanggal_pinjam' => $row->tanggal_pinjam,\n-            'jam_pinjam' => $row->jam_pinjam,\n-            'tanggal_kembali' => $row->tanggal_kembali,\n-            'jam_kembali' => $row->jam_kembali,\n-            'status' => $row->status,\n-        ]);\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     */\n-    public function update(Request $request, string $id)\n-    {\n-\n-        $row = PeminjamanKendaraan::find($id);\n-        if ($row) {\n-            $row->user_id = $request->user_id;\n-            $row->kendaraan_id = $request->kendaraan_id;\n-            $row->kegiatan = $request->kegiatan;\n-            $row->tanggal_pinjam = $request->tanggal_pinjam;\n-            $row->jam_pinjam = $request->jam_pinjam;\n-            $row->tanggal_kembali = $request->tanggal_kembali;\n-            $row->jam_kembali = $request->jam_kembali;\n-            $row->status = $request->status;\n-\n-            $row->save();\n-\n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n     }\n \n@@ -288,8 +148,9 @@\n      */\n     public function destroy(string $id)\n     {\n         $data = PeminjamanKendaraan::findOrFail($id);\n+        Kendaraan::where('id', $data->kendaraan_id)->update(['status' => 1]);\n         $data->delete();\n         return back()->with('hapus', 'Data sudah di Hapus!');\n     }\n }\n"
                },
                {
                    "date": 1713854242581,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n      */\n     public function create()\n     {\n         $data['user'] = User::all();\n-        $data['kendaraan'] = Kendaraan::all();\n+        $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n         $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n         $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n         return view(\"main.peminjaman_kendaraan.create\", $data);\n     }\n"
                },
                {
                    "date": 1713954409460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,35 +6,15 @@\n use App\\Models\\Kendaraan;\n use App\\Models\\PeminjamanKendaraan;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n+use Carbon\\Carbon; // Import Carbon\n \n class PeminjamanKendaraanController extends Controller\n {\n-    /**\n-     * Display a listing of the resource.\n-     */\n-    public function index()\n-    {\n-        $data['title'] = 'Data pengajuan kendaraan';\n-        $user = PeminjamanKendaraan::with('users', 'kendaraan')->get();\n-        $data['result'] = $user->sortDesc();\n-        return view('main.peminjaman_kendaraan.index', $data);\n-    }\n+    // Your existing controller methods...\n \n     /**\n-     * Show the form for creating a new resource.\n-     */\n-    public function create()\n-    {\n-        $data['user'] = User::all();\n-        $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n-        $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n-        $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n-        return view(\"main.peminjaman_kendaraan.create\", $data);\n-    }\n-\n-    /**\n      * Store a newly created resource in storage.\n      */\n     public function store(Request $request)\n     {\n@@ -48,9 +28,8 @@\n                 'jam_pinjam' => 'required',\n                 'tanggal_kembali' => 'required',\n                 'jam_kembali' => 'required',\n                 'status' => 'required',\n-\n             ],\n             [\n                 'user_id.required' => 'user_id tidak boleh kosong',\n                 'kendaraan_id.required' => 'kendaraan_id tidak boleh kosong',\n@@ -62,8 +41,11 @@\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n         );\n \n+        // Use Carbon to get real-time date and time\n+        $currentDateTime = Carbon::now();\n+\n         PeminjamanKendaraan::create([\n             'user_id' => $request->user_id,\n             'kendaraan_id' => $request->kendaraan_id,\n             'kegiatan' => $request->kegiatan,\n@@ -71,86 +53,16 @@\n             'jam_pinjam' => $request->jam_pinjam,\n             'tanggal_kembali' => $request->tanggal_kembali,\n             'jam_kembali' => $request->jam_kembali,\n             'status' => $request->status,\n+            // Store real-time date and time\n+            'created_at' => $currentDateTime,\n+            'updated_at' => $currentDateTime,\n         ]);\n \n         Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n \n         return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n     }\n \n-    /**\n-     * Display the specified resource.\n-     */\n-    public function show(string $id)\n-    {\n-        //\n-    }\n-\n-    /**\n-     * Show the form for editing the specified resource.\n-     */\n-    public function edit(string $id)\n-    {\n-        $row = PeminjamanKendaraan::findOrFail($id);\n-        $user = User::all();\n-        $kendaraan = Kendaraan::all();\n-        return view('main.peminjaman_kendaraan.edit', [\n-            'title' => 'Edit Data Pengajuan Kendaraan',\n-            'user_id' => $row->user_id,\n-            'user' => $user,\n-            'id' => $row->id,\n-            'kendaraan_id' => $row->kendaraan_id,\n-            'kendaraan' => $kendaraan,\n-            'kegiatan' => $row->kegiatan,\n-            'tanggal_pinjam' => $row->tanggal_pinjam,\n-            'jam_pinjam' => $row->jam_pinjam,\n-            'tanggal_kembali' => $row->tanggal_kembali,\n-            'jam_kembali' => $row->jam_kembali,\n-            'status' => $row->status,\n-        ]);\n-    }\n-\n-    /**\n-     * Update the specified resource in storage.\n-     */\n-    public function update(Request $request, string $id)\n-    {\n-\n-        $row = PeminjamanKendaraan::find($id);\n-        if ($row) {\n-            if ($row->kendaraan_id != $request->kendaraan_id) {\n-                Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n-            }\n-            $row->user_id = $request->user_id;\n-            $row->kendaraan_id = $request->kendaraan_id;\n-            $row->kegiatan = $request->kegiatan;\n-            $row->tanggal_pinjam = $request->tanggal_pinjam;\n-            $row->jam_pinjam = $request->jam_pinjam;\n-            $row->tanggal_kembali = $request->tanggal_kembali;\n-            $row->jam_kembali = $request->jam_kembali;\n-            $row->status = $request->status;\n-\n-            $row->save();\n-            if ($row->status != 'diterima')\n-                if ($row->status != 'pending') {\n-                    Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-                }\n-\n-\n-            return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n-        }\n-    }\n-\n-    /**\n-     * Remove the specified resource from storage.\n-     */\n-    public function destroy(string $id)\n-    {\n-        $data = PeminjamanKendaraan::findOrFail($id);\n-        Kendaraan::where('id', $data->kendaraan_id)->update(['status' => 1]);\n-        $data->delete();\n-        return back()->with('hapus', 'Data sudah di Hapus!');\n-    }\n+    // Your other controller methods...\n }\n"
                },
                {
                    "date": 1713954579958,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,15 +6,35 @@\n use App\\Models\\Kendaraan;\n use App\\Models\\PeminjamanKendaraan;\n use App\\Models\\User;\n use Illuminate\\Http\\Request;\n-use Carbon\\Carbon; // Import Carbon\n \n class PeminjamanKendaraanController extends Controller\n {\n-    // Your existing controller methods...\n+    /**\n+     * Display a listing of the resource.\n+     */\n+    public function index()\n+    {\n+        $data['title'] = 'Data pengajuan kendaraan';\n+        $user = PeminjamanKendaraan::with('users', 'kendaraan')->get();\n+        $data['result'] = $user->sortDesc();\n+        return view('main.peminjaman_kendaraan.index', $data);\n+    }\n \n     /**\n+     * Show the form for creating a new resource.\n+     */\n+    public function create()\n+    {\n+        $data['user'] = User::all();\n+        $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n+        $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n+        $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n+        return view(\"main.peminjaman_kendaraan.create\", $data);\n+    }\n+\n+    /**\n      * Store a newly created resource in storage.\n      */\n     public function store(Request $request)\n     {\n@@ -28,8 +48,9 @@\n                 'jam_pinjam' => 'required',\n                 'tanggal_kembali' => 'required',\n                 'jam_kembali' => 'required',\n                 'status' => 'required',\n+\n             ],\n             [\n                 'user_id.required' => 'user_id tidak boleh kosong',\n                 'kendaraan_id.required' => 'kendaraan_id tidak boleh kosong',\n@@ -41,11 +62,8 @@\n                 'status.required' => 'status tidak boleh kosong',\n             ]\n         );\n \n-        // Use Carbon to get real-time date and time\n-        $currentDateTime = Carbon::now();\n-\n         PeminjamanKendaraan::create([\n             'user_id' => $request->user_id,\n             'kendaraan_id' => $request->kendaraan_id,\n             'kegiatan' => $request->kegiatan,\n@@ -53,16 +71,86 @@\n             'jam_pinjam' => $request->jam_pinjam,\n             'tanggal_kembali' => $request->tanggal_kembali,\n             'jam_kembali' => $request->jam_kembali,\n             'status' => $request->status,\n-            // Store real-time date and time\n-            'created_at' => $currentDateTime,\n-            'updated_at' => $currentDateTime,\n         ]);\n \n         Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n \n         return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n     }\n \n-    // Your other controller methods...\n+    /**\n+     * Display the specified resource.\n+     */\n+    public function show(string $id)\n+    {\n+        //\n+    }\n+\n+    /**\n+     * Show the form for editing the specified resource.\n+     */\n+    public function edit(string $id)\n+    {\n+        $row = PeminjamanKendaraan::findOrFail($id);\n+        $user = User::all();\n+        $kendaraan = Kendaraan::all();\n+        return view('main.peminjaman_kendaraan.edit', [\n+            'title' => 'Edit Data Pengajuan Kendaraan',\n+            'user_id' => $row->user_id,\n+            'user' => $user,\n+            'id' => $row->id,\n+            'kendaraan_id' => $row->kendaraan_id,\n+            'kendaraan' => $kendaraan,\n+            'kegiatan' => $row->kegiatan,\n+            'tanggal_pinjam' => $row->tanggal_pinjam,\n+            'jam_pinjam' => $row->jam_pinjam,\n+            'tanggal_kembali' => $row->tanggal_kembali,\n+            'jam_kembali' => $row->jam_kembali,\n+            'status' => $row->status,\n+        ]);\n+    }\n+\n+    /**\n+     * Update the specified resource in storage.\n+     */\n+    public function update(Request $request, string $id)\n+    {\n+\n+        $row = PeminjamanKendaraan::find($id);\n+        if ($row) {\n+            if ($row->kendaraan_id != $request->kendaraan_id) {\n+                Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n+                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n+            }\n+            $row->user_id = $request->user_id;\n+            $row->kendaraan_id = $request->kendaraan_id;\n+            $row->kegiatan = $request->kegiatan;\n+            $row->tanggal_pinjam = $request->tanggal_pinjam;\n+            $row->jam_pinjam = $request->jam_pinjam;\n+            $row->tanggal_kembali = $request->tanggal_kembali;\n+            $row->jam_kembali = $request->jam_kembali;\n+            $row->status = $request->status;\n+\n+            $row->save();\n+            if ($row->status != 'diterima')\n+                if ($row->status != 'pending') {\n+                    Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n+                }\n+\n+\n+            return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n+        }\n+    }\n+\n+    /**\n+     * Remove the specified resource from storage.\n+     */\n+    public function destroy(string $id)\n+    {\n+        $data = PeminjamanKendaraan::findOrFail($id);\n+        Kendaraan::where('id', $data->kendaraan_id)->update(['status' => 1]);\n+        $data->delete();\n+        return back()->with('hapus', 'Data sudah di Hapus!');\n+    }\n }\n"
                },
                {
                    "date": 1713959723094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n      */\n     public function create()\n     {\n         $data['user'] = User::all();\n-        $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n+        $data['kendaraan'] = Kendaraan::all();\n         $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n         $data['title'] = \"Tambah Data Pengajuan Kendaraan\";\n         return view(\"main.peminjaman_kendaraan.create\", $data);\n     }\n@@ -118,12 +118,8 @@\n     {\n \n         $row = PeminjamanKendaraan::find($id);\n         if ($row) {\n-            if ($row->kendaraan_id != $request->kendaraan_id) {\n-                Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n-                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n-            }\n             $row->user_id = $request->user_id;\n             $row->kendaraan_id = $request->kendaraan_id;\n             $row->kegiatan = $request->kegiatan;\n             $row->tanggal_pinjam = $request->tanggal_pinjam;\n@@ -132,12 +128,8 @@\n             $row->jam_kembali = $request->jam_kembali;\n             $row->status = $request->status;\n \n             $row->save();\n-            if ($row->status != 'diterima')\n-                if ($row->status != 'pending') {\n-                    Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n-                }\n \n \n             return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n         }\n@@ -148,9 +140,9 @@\n      */\n     public function destroy(string $id)\n     {\n         $data = PeminjamanKendaraan::findOrFail($id);\n-        Kendaraan::where('id', $data->kendaraan_id)->update(['status' => 1]);\n+\n         $data->delete();\n         return back()->with('hapus', 'Data sudah di Hapus!');\n     }\n }\n"
                },
                {
                    "date": 1713959771890,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,10 +73,8 @@\n             'jam_kembali' => $request->jam_kembali,\n             'status' => $request->status,\n         ]);\n \n-        Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n-\n         return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n     }\n \n     /**\n"
                }
            ],
            "date": 1704814303137,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers\\Main;\n\nuse App\\Http\\Controllers\\Controller;\nuse App\\Models\\Kendaraan;\nuse App\\Models\\PeminjamanKendaraan;\nuse App\\Models\\User;\nuse Illuminate\\Http\\Request;\n\nclass PeminjamanKendaraanController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     */\n    public function index()\n    {\n        if ($user = auth()->user()->jab_id == 4) {\n            $user = auth()->user()->id;\n            $data['title'] = 'Data pengajuan peminjaman kendaraan';\n            $user = PeminjamanKendaraan::with('users', 'kendaraan')\n                ->where('user_id', $user)\n                ->get();\n            $data['result'] = $user->sortDesc();\n            return view('main.peminjaman_kendaraan.index', $data);\n        } else {\n            $data['title'] = 'Data pengajuan peminjaman kendaraan';\n            $user = PeminjamanKendaraan::with('users', 'kendaraan')\n                ->get();\n            $data['result'] = $user->sortDesc();\n            return view('main.peminjaman_kendaraan.index', $data);\n        }\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     */\n    public function create()\n    {\n        $data['user'] = User::all();\n        $data['kendaraan'] = Kendaraan::where('status', 1)->get();\n        $data['peminjaman_kendaraan'] = PeminjamanKendaraan::all();\n        $data['title'] = \"Tambah Data Peminjaman Kendaraan\";\n        return view(\"main.peminjaman_kendaraan.create\", $data);\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     */\n    public function store(Request $request)\n    {\n        $validasi = $this->validate(\n            $request,\n            [\n                'user_id' => 'required',\n                'kendaraan_id' => 'required',\n                'kegiatan' => 'required',\n                'tanggal_pinjam' => 'required',\n                'jam_pinjam' => 'required',\n                'tanggal_kembali' => 'required',\n                'jam_kembali' => 'required',\n                'status' => 'required',\n\n            ],\n            [\n                'user_id.required' => 'user_id produk tidak boleh kosong',\n                'kendaraan_id.required' => 'kendaraan_id tidak boleh kosong',\n                'kegiatan.required' => 'kegiatan tidak boleh kosong',\n                'tanggal_pinjam.required' => 'tanggal_pinjam tidak boleh kosong',\n                'jam_pinjam.required' => 'jam_pinjam tidak boleh kosong',\n                'tanggal_kembali.required' => 'tanggal_kembali tidak boleh kosong',\n                'jam_kembali.required' => 'jam_kembali tidak boleh kosong',\n                'status.required' => 'status tidak boleh kosong',\n            ]\n        );\n\n        PeminjamanKendaraan::create([\n            'user_id' => $request->user_id,\n            'kendaraan_id' => $request->kendaraan_id,\n            'kegiatan' => $request->kegiatan,\n            'tanggal_pinjam' => $request->tanggal_pinjam,\n            'jam_pinjam' => $request->jam_pinjam,\n            'tanggal_kembali' => $request->tanggal_kembali,\n            'jam_kembali' => $request->jam_kembali,\n            'status' => $request->status,\n        ]);\n\n        Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n\n        return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil disimpan!');\n    }\n\n    /**\n     * Display the specified resource.\n     */\n    public function show(string $id)\n    {\n        //\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     */\n    public function edit(string $id)\n    {\n        $row = PeminjamanKendaraan::findOrFail($id);\n        $user = User::all();\n        $kendaraan = Kendaraan::all();\n        return view('main.peminjaman_kendaraan.edit', [\n            'title' => 'Edit Data Pengajuan Peminjaman Kendaraan',\n            'user' => $user,\n            'id' => $row->id,\n            'nama' => $row->nama,\n            'kendaraan' => $kendaraan,\n            'kegiatan' => $row->kegiatan,\n            'tanggal_pinjam' => $row->tanggal_pinjam,\n            'jam_pinjam' => $row->jam_pinjam,\n            'tanggal_kembali' => $row->tanggal_kembali,\n            'jam_kembali' => $row->jam_kembali,\n            'status' => $row->status,\n        ]);\n    }\n\n    /**\n     * Update the specified resource in storage.\n     */\n    public function update(Request $request, string $id)\n    {\n\n        $row = PeminjamanKendaraan::find($id);\n        if ($row) {\n            if ($row->kendaraan_id != $request->kendaraan_id) {\n                Kendaraan::where('id', $row->kendaraan_id)->update(['status' => 1]);\n                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 0]);\n            }\n            $row->user_id = $request->user_id;\n            $row->kendaraan_id = $request->kendaraan_id;\n            $row->kegiatan = $request->kegiatan;\n            $row->tanggal_pinjam = $request->tanggal_pinjam;\n            $row->jam_pinjam = $request->jam_pinjam;\n            $row->tanggal_kembali = $request->tanggal_kembali;\n            $row->jam_kembali = $request->jam_kembali;\n            $row->status = $request->status;\n\n            $row->save();\n            if ($row->status != 'pending') {\n                Kendaraan::where('id', $request->kendaraan_id)->update(['status' => 1]);\n            }\n            return redirect('main/peminjaman_kendaraan')->with('success', 'Data berhasil diubah');\n        }\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     */\n    public function destroy(string $id)\n    {\n        $data = PeminjamanKendaraan::findOrFail($id);\n        Kendaraan::where('id', $data->kendaraan_id)->update(['status' => 1]);\n        $data->delete();\n        return back()->with('hapus', 'Data sudah di Hapus!');\n    }\n}\n"
        }
    ]
}